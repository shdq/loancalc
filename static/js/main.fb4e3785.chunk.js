(this.webpackJsonploancalc=this.webpackJsonploancalc||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var l=a(0),s=a.n(l),n=a(32),i=a.n(n),r=a(22);var o=e=>s.a.createElement("div",{className:"output-field"},s.a.createElement("p",{className:"output-field__description"},e.title,":\xa0",s.a.createElement("span",{className:"output-field__value"},e.value," ",e.unit))),c=a(26);class u extends s.a.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onValueChange(e.target.value)}render(){let e=null;this.props.tooltip&&(e=s.a.createElement("span",{className:"tooltip","data-tooltip":this.props.tooltip},"\xa0",s.a.createElement(c.a,{icon:"question-circle"})));let t=Number(this.props.field.value).toLocaleString("ru-RU");return s.a.createElement("div",{className:"input-field"},s.a.createElement("p",{className:"input-field__description"},this.props.desc,e,"\xa0",s.a.createElement("span",{className:"input-field__range-value"},t," ",this.props.unit)),s.a.createElement("input",{className:"input-field__range",type:"range",min:this.props.field.minValue,max:this.props.field.maxValue,step:this.props.step,value:this.props.field.value,onChange:this.handleChange}),s.a.createElement("p",{className:"input-field__label"},s.a.createElement("span",{className:"input-field__label-value input-field__label-value_min"},this.props.field.minValue.toLocaleString("ru-RU")),s.a.createElement("span",{className:"input-field__label-value input-field__label-value_max"},this.props.field.maxValue.toLocaleString("ru-RU"))))}}var h=u;var m=e=>s.a.createElement("button",{className:"download-button",onClick:e.onClick},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c PDF\xa0",s.a.createElement(c.a,{icon:"file-pdf"}));class d extends s.a.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){this.props.onValueChange(e.target.value)}render(){return s.a.createElement("button",{className:"date-picker-button",onClick:this.props.onClick},this.props.value,"\xa0",s.a.createElement(c.a,{icon:"caret-down"}))}}var p=d,g=a(60),v=a.n(g),_=a(72),b=a.n(_),x=a(43),E=a.n(x),f=(a(102),a(53)),C=(a(106),a(113));Object(f.b)("ru",C.a),Object(f.c)("ru"),v.a.vfs=b.a.pdfMake.vfs;let N=document.getElementsByClassName("key-interest-rate__value")[0].dataset.value;isNaN(N)&&(N=8,console.error("Key interest rate is not a number"));class V extends s.a.Component{constructor(e){super(e),this.roundHelper=e=>Math.round(100*e)/100,this.constructRow=(e,t,a,l,s,n,i)=>[{text:e,alignment:"right"},{text:t.format("MMMM YYYY"),alignment:"left"},{text:this.roundHelper(a),alignment:"right"},i>0?{text:this.roundHelper(l),alignment:"right"}:{text:s,alignment:"right"},{text:this.roundHelper(l),alignment:"right"},i>0?{text:"\u2013",alignment:"right"}:{text:this.roundHelper(n),alignment:"right"}],this.fillRows=(e,t,a,l,s,n)=>{const i=[],r=n.clone(),o=s/100/12;for(let c=1;c<=t;c++){r.add(1,"month");const t=e*o,s=l-t,n=this.constructRow(c,r,e,t,l,s,a);i.push(n),a>0?a--:e-=s}return i},this.Calculate=this.Calculate.bind(this),this.handleSumChange=this.handleSumChange.bind(this),this.handleTermChange=this.handleTermChange.bind(this),this.handleGraceChange=this.handleGraceChange.bind(this),this.handleRadioChange=this.handleRadioChange.bind(this),this.handleDateChange=this.handleDateChange.bind(this),this.generatePdf=this.generatePdf.bind(this),this.roundHelper=this.roundHelper.bind(this),this.fillRows=this.fillRows.bind(this),this.constructRow=this.constructRow.bind(this),this.state={loanSum:{value:5e5,minValue:5e4,maxValue:5e6},loanTerm:{value:36,minValue:3,maxValue:36},gracePeriod:{value:0,minValue:0,maxValue:35},interestRate:N,selectedValue:"0",startDate:E()(),outputData:{monthlyPayment:15553.11,gracePeriod:0,requirements:"\u041f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u043b\u0438 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043b\u0438\u0446"}}}handleSumChange(e){let t,a;switch(this.state.selectedValue){case"express":t=3e4,a=1e5;break;case"covid":t=5e4,a=5e5;break;default:t=5e4,a=5e6}this.setState({loanSum:{value:e,minValue:t,maxValue:a}}),this.Calculate(this.state.interestRate,e,this.state.loanTerm.value,this.state.gracePeriod.value)}handleTermChange(e){let t;t="express"===this.state.selectedValue?0:e-1;const a=this.state.gracePeriod.value<t?this.state.gracePeriod.value:t;this.setState({loanTerm:{value:e,minValue:3,maxValue:this.state.loanTerm.maxValue},gracePeriod:{value:a,minValue:0,maxValue:t}}),this.Calculate(this.state.interestRate,this.state.loanSum.value,e,a)}handleGraceChange(e){this.setState({gracePeriod:{value:e,minValue:0,maxValue:this.state.gracePeriod.maxValue}}),this.Calculate(this.state.interestRate,this.state.loanSum.value,this.state.loanTerm.value,e)}handleRadioChange(e){let t,a;switch(e){case"express":t=3e4,a=1e5;break;case"covid":t=5e4,a=5e5;break;default:t=5e4,a=5e6}let l=this.state.loanSum.value;l<t&&(l=t),"express"!==e&&l<t+5e4&&(l=t);let s=N-e,n=this.state.loanTerm.value,i=36,r=n-1,o=this.state.gracePeriod.value<r?this.state.gracePeriod.value:r;"s+"===e&&(s=N-.5,i=12,n>12&&(n=12,o>11&&(o=11)),r=n-1),"covid"===e&&(s=1,i=24,n>24&&(n=24,o>23&&(o=23)),r=n-1,l>a&&(l=a)),"express"===e&&(s=N,i=12,r=0,o=0,n>12&&(n=12,o>0&&(o=0)),l>a&&(l=a)),this.setState({selectedValue:e,interestRate:s,loanTerm:{value:n,minValue:3,maxValue:i},gracePeriod:{value:o,minValue:0,maxValue:r},loanSum:{value:l,minValue:t,maxValue:a}}),this.Calculate(s,l,n,o)}generatePdf(){const e=this.fillRows(this.state.loanSum.value,this.state.loanTerm.value,this.state.gracePeriod.value,this.state.outputData.monthlyPayment,this.state.interestRate,this.state.startDate);let t;t=this.state.gracePeriod.value>0?this.state.gracePeriod.value*this.state.outputData.gracePayment+this.state.outputData.monthlyPayment*(this.state.loanTerm.value-this.state.gracePeriod.value):this.state.outputData.monthlyPayment*this.state.loanTerm.value;let a={pageSize:"A4",pageOrientation:"landscape",content:[{text:"\u0413\u0440\u0430\u0444\u0438\u043a \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u0437\u0430\u0439\u043c\u0430 \u043e\u0442 ".concat(this.state.startDate.format("D MMMM YYYY")," \u0433. *\n\n"),fontSize:18,color:"#0a6586"},{text:"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043c\u0438\u043a\u0440\u043e\u0437\u0430\u0439\u043c\u0430:",bold:!0},{text:"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u0439\u043c\u0430: ".concat(this.state.loanSum.value," \u0440\u0443\u0431.")},{text:"\u0421\u0440\u043e\u043a \u0437\u0430\u0439\u043c\u0430: ".concat(this.state.loanTerm.value," \u043c\u0435\u0441.")},{text:"".concat(this.state.gracePeriod.value>0?"\u041b\u044c\u0433\u043e\u0442\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434: ".concat(this.state.gracePeriod.value," \u043c\u0435\u0441."):"")},{text:"\u0413\u043e\u0434\u043e\u0432\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430: ".concat(Number(this.state.interestRate).toLocaleString("ru-RU"),"%\n\n")},{table:{headerRows:2,widths:[25,100,"auto","auto","auto","auto"],body:[[{rowSpan:2,text:"\u2116",alignment:"right",bold:!0},{rowSpan:2,text:"\u0414\u0430\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430",alignment:"left",bold:!0},{rowSpan:2,text:"\u041e\u0441\u0442\u0430\u0442\u043e\u043a \u0434\u043e\u043b\u0433\u0430 \u043d\u0430 \u043d\u0430\u0447\u0430\u043b\u043e \u043c\u0435\u0441\u044f\u0446\u0430, \u0440\u0443\u0431.",alignment:"right",bold:!0},{rowSpan:2,text:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u0430\u044f \u0441\u0440\u043e\u0447\u043d\u0430\u044f \u0443\u043f\u043b\u0430\u0442\u0430, \u0440\u0443\u0431.",alignment:"right",bold:!0},{text:"\u0412 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435:",colSpan:2,alignment:"center",bold:!0},{}],[{},{},{},{},{text:"\u041d\u0430 \u0432\u044b\u043f\u043b\u0430\u0442\u0443 \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u043e\u0432, \u0440\u0443\u0431.",alignment:"right",bold:!0},{text:"\u041d\u0430 \u043f\u043e\u0433\u0430\u0448\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0433\u0430, \u0440\u0443\u0431.",alignment:"right",bold:!0}],...e,[{text:"\u0418\u0442\u043e\u0433\u043e",colSpan:2,bold:!0,alignment:"left"},{},{text:"\u2013",alignment:"right",bold:!0},{text:this.roundHelper(t),alignment:"right",bold:!0},{text:this.roundHelper(t-this.state.loanSum.value),alignment:"right",bold:!0},{text:this.state.loanSum.value,alignment:"right",bold:!0}]]}},{text:"\n* \u041d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c \u043a \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0443, \u0440\u0430\u0441\u0447\u0435\u0442 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439."},{text:"\n\nhttps://cmf29.ru/kalkulator",alignment:"right",bold:!0,color:"#0a6586"}]};v.a.createPdf(a).download("\u0413\u0440\u0430\u0444\u0438\u043a-\u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439-\u0441-".concat(this.state.startDate.format("L"),".pdf"))}handleDateChange(e){this.setState({startDate:E()(e)})}Calculate(e,t,a,l){const s=e/100/12;let n=this.state.outputData.monthlyPayment,i=this.state.outputData.gracePayment;if(l>0){i=(t*(s/(1-Math.pow(1+s,-1)))-t).toFixed(2),a-=l;n=(t*(s/(1-Math.pow(1+s,a-2*a)))).toFixed(2)}else{i=l;n=(t*(s/(1-Math.pow(1+s,a-2*a)))).toFixed(2)}let r="\u041f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u043b\u0438 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043b\u0438\u0446";t>5e5&&(r="\u0417\u0430\u043b\u043e\u0433\u043e\u0432\u043e\u0435 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u043e, \u043f\u043e\u0440\u0443\u0447\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438\u043b\u0438 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043b\u0438\u0446"),this.setState({outputData:{monthlyPayment:n,gracePeriod:l,gracePayment:i,requirements:r}})}render(){const e=this.state.loanSum,t=this.state.loanTerm,a=this.state.gracePeriod;let l=null;return this.state.gracePeriod.value>0&&(l=s.a.createElement(o,{title:"\u041f\u043b\u0430\u0442\u0435\u0436 \u0432 \u043b\u044c\u0433\u043e\u0442\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434",value:Number(this.state.outputData.gracePayment).toLocaleString("ru-RU"),unit:"\u20bd"})),s.a.createElement("div",{className:"calculator"},s.a.createElement("div",{className:"input-group"},s.a.createElement(h,{field:e,onValueChange:this.handleSumChange,unit:"\u20bd",step:"express"===this.state.selectedValue?"10000":"50000",desc:"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u0439\u043c\u0430"}),s.a.createElement(h,{field:t,onValueChange:this.handleTermChange,unit:"\u043c\u0435\u0441.",step:"1",desc:"\u0421\u0440\u043e\u043a \u0437\u0430\u0439\u043c\u0430"}),s.a.createElement(h,{field:a,onValueChange:this.handleGraceChange,unit:"\u043c\u0435\u0441.",step:"1",desc:"\u041b\u044c\u0433\u043e\u0442\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434",tooltip:"\u041f\u0435\u0440\u0438\u043e\u0434, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0443\u043f\u043b\u0430\u0447\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u044b."}),s.a.createElement("div",{className:"input-field"},s.a.createElement("p",{className:"input-field__description"},"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0444\u043e\u043d\u0434\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u0435\u0439:"),s.a.createElement(r.RadioGroup,{className:"interest-rate-radio",name:"interestRateRadio",selectedValue:this.state.selectedValue,onChange:this.handleRadioChange},s.a.createElement("label",{className:"interest-rate-radio__label"},s.a.createElement(r.Radio,{className:"interest-rate-radio__input",checked:"covid"===this.state.selectedValue,value:"covid"}),"\xab\u0410\u043d\u0442\u0438\u043a\u0440\u0438\u0437\u0438\u0441\u043d\u0430\u044f\xbb",s.a.createElement("span",{className:"interest-rate-radio__checkmark"})),s.a.createElement("label",{className:"interest-rate-radio__label"},s.a.createElement(r.Radio,{className:"interest-rate-radio__input",checked:"0"===this.state.selectedValue,value:"0"}),"\xab\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\xbb, \xab\u0420\u0435\u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\xbb",s.a.createElement("span",{className:"interest-rate-radio__checkmark"})),s.a.createElement("label",{className:"interest-rate-radio__label"},s.a.createElement(r.Radio,{className:"interest-rate-radio__input",checked:"express"===this.state.selectedValue,value:"express"}),"\xab\u042d\u043a\u0441\u043f\u0440\u0435\u0441\u0441\xbb",s.a.createElement("span",{className:"interest-rate-radio__checkmark"})),s.a.createElement("label",{className:"interest-rate-radio__label"},s.a.createElement(r.Radio,{className:"interest-rate-radio__input",checked:this.state.selectedValue===(N/2).toPrecision(2),value:(N/2).toPrecision(3)}),"\xab\u0410\u0440\u043a\u0442\u0438\u043a\u0430\xbb, \xab\u041c\u043e\u043d\u043e\u0433\u043e\u0440\u043e\u0434\xbb",s.a.createElement("span",{className:"interest-rate-radio__checkmark"})),s.a.createElement("label",{className:"interest-rate-radio__label"},s.a.createElement(r.Radio,{className:"interest-rate-radio__input",checked:"0.5"===this.state.selectedValue,value:"0.5"}),"\xab\u0421\u0435\u043b\u044c\u0445\u043e\u0437\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\xbb",s.a.createElement("span",{className:"interest-rate-radio__checkmark"})),s.a.createElement("label",{className:"interest-rate-radio__label"},s.a.createElement(r.Radio,{className:"interest-rate-radio__input",checked:"1.5"===this.state.selectedValue,value:"1.5"}),"\xab\u0420\u0435\u0446\u0438\u043a\u043b\u0438\u043d\u0433\xbb, \xab\u0421\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e\xbb",s.a.createElement("span",{className:"interest-rate-radio__checkmark"})),s.a.createElement("label",{className:"interest-rate-radio__label"},s.a.createElement(r.Radio,{className:"interest-rate-radio__input",checked:"0.25"===this.state.selectedValue,value:"0.25"}),"\xab\u041b\u0438\u0437\u0438\u043d\u0433\xbb, \xab\u041c\u0435\u0441\u0442\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440\u043e\u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\xbb, \xab\u0422\u0443\u0440\u0438\u0437\u043c\xbb",s.a.createElement("span",{className:"interest-rate-radio__checkmark"}))))),s.a.createElement("div",{className:"output-group"},s.a.createElement(o,{title:"\u0413\u043e\u0434\u043e\u0432\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430",value:Number(this.state.interestRate).toLocaleString("ru-RU"),unit:"%"}),s.a.createElement(o,{title:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0440\u043e\u043a",value:this.state.loanTerm.maxValue,unit:"\u043c\u0435\u0441."}),s.a.createElement(o,{title:"\u0415\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u044b\u0439 \u043f\u043b\u0430\u0442\u0435\u0436",value:Number(this.state.outputData.monthlyPayment).toLocaleString("ru-RU"),unit:"\u20bd"}),l,s.a.createElement(o,{title:"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0437\u0430\u0435\u043c\u0449\u0438\u043a\u0443",value:this.state.outputData.requirements}),s.a.createElement("div",{className:"output-field"},s.a.createElement("div",{className:"output-field__description"},"\u0413\u0440\u0430\u0444\u0438\u043a \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u0437\u0430\u0439\u043c\u0430 \u043e\u0442\xa0",s.a.createElement(f.a,{selected:this.state.startDate._d,onChange:this.handleDateChange,dateFormat:"d MMMM yyyy",fixedHeight:!0,showYearDropdown:!0,yearDropdownItemNumber:1,showYearSelectOnly:!0,customInput:s.a.createElement(p,null)}),s.a.createElement(m,{onClick:this.generatePdf})))))}}var k=V,P=(a(107),a(33)),R=a(58);P.b.add(R.b,R.c,R.a),i.a.render(s.a.createElement(k,null),document.getElementById("root"))},91:function(e,t,a){e.exports=a(108)}},[[91,1,2]]]);
//# sourceMappingURL=main.fb4e3785.chunk.js.map